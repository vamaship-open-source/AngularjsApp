function validate(){if($.cookie("userid")||url==window.location.href||(window.location=url),$.cookie("examtime")){var e=parseInt($.cookie("examtime"))+36e5,t=new Date,a=t.getTime();e>a?window.location=$.cookie("examurl"):($.removeCookie("examtime"),$.removeCookie("examurl"))}}function getUrl(e){if(e){var t=e.split("/");for(i=0;i<t.length;i++)t[i].indexOf(".html")>0&&(e=e.replace(t[i],""))}return e}function create_licence_key(){var e="";for(i=0;i<4;i++){var t=parseInt(10*Math.random()),a=parseInt(100*Math.random());e=e+(""==e?"":"-")+t+a}return 15!=e.length&&create_licence_key(),$.cookie("locenceText",e),e}function get_licence_value(e){var t="";e=e.split("-");for(var a=[],n=0;n<e.length;n++){a[n]=[];for(var i=0;i<e[n].length;i++)a[n][i]=e[n].substr(i,1);for(var i=0;i<a[n].length-1;i++)for(var r=i;r<a[n].length-1;r++)t=t+""+password_encodetest[e[n].substr(0,1)][parseInt(10*a[n][i])+parseInt(a[n][r+1])]}return t}function pass_decode(e){for(var t="",a=0;a<e.length;a++)t=password_encode.indexOf(e.substr(a,1))>=0?t+""+password_decode[password_encode.indexOf(e.substr(a,1))]:t+""+e.substr(a,1),t=a<parseInt(e.length-1)?t+"&&":t;for(var n="",a=0;50>a;a++){var i=parseInt(10*Math.random());n=n+""+password_special[i]}return n+"~-+-~"+t}function readURL(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(t){$(e).parent().parent().find("img").attr("src",t.target.result)},t.readAsDataURL(e.files[0])}}var apiurl="http://achieveee.com/examguru/app/v1/",password_encode=["e","f","g","G","E","I","J","K","J","h","i","j","k","7","8","9","a","b","c","d","e","f","g","h","m","1","2","3","4","5","6","n","1","2","3","4","5","6","7","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","M","N","0","1","2","3","4","5","T","U","V","W","X","Y","Z","0","1","2","3","4","8","9","o","i","j","k","l","5","6","7","6","7","8","9","O","P","Q","R","S","8","9"],password_decode=["D","E","F","4","5","I","J","K","J","r","s","t","u","v","h","i","j","d","e","f","g","h","m","1","k","7","8","9","a","b","c","2","3","4","5","6","n","1","2","3","4","5","6","7","e","f","g","G","E","p","q","w","x","y","z","0","1","2","3","4","5","6","7","8","9","A","B","C","T","U","V","W","X","Y","Z","0","1","2","3","4","8","9","o","i","j","k","l","5","6","7","6","7","8","9","O","P","Q","R","S","M","N","0","1","2","3","8","9"],password_special=["!","#","$","@","%","^","&","*","~","-"],password_encodetest=[];for(i=0;i<10;i++)password_encodetest[i]=["1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","1","2","3","4","5","6","7","8","9","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","E","I","J","K","J","M","N","0","1","2","3","4","5","6","7","8","9","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"];var url=$.cookie("url")?$.cookie("url"):window.location.href;$.cookie("url",url),validate();var licExamGuru=angular.module("licExamGuru",["ngRoute","indexedDB","ngCookies"]).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension):/)}]).config(function(e){e.connection("LicExamGuru").upgradeDatabase(2,function(e,t){var a=t.createObjectStore("acount_table",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("member_id","member_id",{unique:!1}),a.createIndex("message","message",{unique:!1}),a.createIndex("status","status",{unique:!1}),a.createIndex("credit_id","credit_id",{unique:!1}),a.createIndex("devid_id","devid_id",{unique:!1}),a.createIndex("credit_amt","credit_amt",{unique:!1}),a.createIndex("devid_amt","devid_amt",{unique:!1}),a.createIndex("credit_date","credit_date",{unique:!1}),a.createIndex("devid_date","devid_date",{unique:!1});var a=t.createObjectStore("activation",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("member","member",{unique:!1}),a.createIndex("amount","amount",{unique:!1});var a=t.createObjectStore("admin_acount",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("dealer_id","dealer_id",{unique:!1}),a.createIndex("amount","amount",{unique:!1}),a.createIndex("transfer_date","transfer_date",{unique:!1});var a=t.createObjectStore("demo_table",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("name","name",{unique:!1}),a.createIndex("email","email",{unique:!1}),a.createIndex("mobile","mobile",{unique:!1}),a.createIndex("demotype","demotype",{unique:!1}),a.createIndex("typeval","typeval",{unique:!1}),a.createIndex("created_at","created_at",{unique:!1}),a.createIndex("demo_result","demo_result",{unique:!1});var a=t.createObjectStore("exam_table",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("member","member",{unique:!1}),a.createIndex("model_id","model_id",{unique:!1}),a.createIndex("exam_type","exam_type",{unique:!1}),a.createIndex("exam_date","exam_date",{unique:!1}),a.createIndex("questions","questions",{unique:!1}),a.createIndex("attempt","attempt",{unique:!1}),a.createIndex("unattenpt","unattenpt",{unique:!1}),a.createIndex("correct","correct",{unique:!1}),a.createIndex("wrong","wrong",{unique:!1}),a.createIndex("result","result",{unique:!1}),a.createIndex("status","status",{unique:!1});var a=t.createObjectStore("game_table",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("member","member",{unique:!1}),a.createIndex("model_id","model_id",{unique:!1}),a.createIndex("game_type","game_type",{unique:!1}),a.createIndex("play_date","play_date",{unique:!1}),a.createIndex("points","points",{unique:!1});var a=t.createObjectStore("users",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("email","email",{unique:!1}),a.createIndex("name","name",{unique:!1}),a.createIndex("mobile","mobile",{unique:!1}),a.createIndex("password","password",{unique:!1}),a.createIndex("passwordtext","passwordtext",{unique:!1}),a.createIndex("state","state",{unique:!1}),a.createIndex("city","city",{unique:!1}),a.createIndex("division","division",{unique:!1}),a.createIndex("member_type","member_type",{unique:!1}),a.createIndex("parent_id","parent_id",{unique:!1}),a.createIndex("created_at","created_at",{unique:!1}),a.createIndex("updated_at","updated_at",{unique:!1}),a.createIndex("status","status",{unique:!1}),a.createIndex("start_date","start_date",{unique:!1}),a.createIndex("exp_date","exp_date",{unique:!1}),a.createIndex("profile_photo","profile_photo",{unique:!1}),a.createIndex("banner_photo","banner_photo",{unique:!1}),a.createIndex("verification","verification",{unique:!1}),a.createIndex("acount_val","acount_val",{unique:!1});var a=t.createObjectStore("meratial",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("name","name",{unique:!1}),a.createIndex("type","type",{unique:!1}),a.createIndex("metarial_id","metarial_id",{unique:!1});var a=t.createObjectStore("model_paper",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("name","name",{unique:!1}),a.createIndex("type","type",{unique:!1}),a.createIndex("module_id","module_id",{unique:!1});var a=t.createObjectStore("newquestion",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("question","question",{unique:!1}),a.createIndex("option1","option1",{unique:!1}),a.createIndex("option2","option2",{unique:!1}),a.createIndex("option3","option3",{unique:!1}),a.createIndex("option4","option4",{unique:!1}),a.createIndex("correct_opt","correct_opt",{unique:!1}),a.createIndex("type","type",{unique:!1}),a.createIndex("module_id","module_id",{unique:!1});var a=t.createObjectStore("notification",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("member_id","member_id",{unique:!1}),a.createIndex("message","message",{unique:!1}),a.createIndex("create_date","create_date",{unique:!1}),a.createIndex("status","status",{unique:!1});var a=t.createObjectStore("oldquestion",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("question","question",{unique:!1}),a.createIndex("option1","option1",{unique:!1}),a.createIndex("option2","option2",{unique:!1}),a.createIndex("option3","option3",{unique:!1}),a.createIndex("option4","option4",{unique:!1}),a.createIndex("correct_opt","correct_opt",{unique:!1}),a.createIndex("type","type",{unique:!1}),a.createIndex("module_id","module_id",{unique:!1}),a.createIndex("status","status",{unique:!1});var a=t.createObjectStore("payment",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("cust_id","cust_id",{unique:!1}),a.createIndex("invoice","invoice",{unique:!1}),a.createIndex("token","token",{unique:!1}),a.createIndex("payer_id","payer_id",{unique:!1}),a.createIndex("plan_id","plan_id",{unique:!1}),a.createIndex("plan","plan",{unique:!1}),a.createIndex("plan_amt","plan_amt",{unique:!1}),a.createIndex("conversions","conversions",{unique:!1}),a.createIndex("conversion_used","conversion_used",{unique:!1}),a.createIndex("transaction_id","transaction_id",{unique:!1}),a.createIndex("transaction_type","transaction_type",{unique:!1}),a.createIndex("payment_type","payment_type",{unique:!1}),a.createIndex("amt","amt",{unique:!1}),a.createIndex("feeamt","feeamt",{unique:!1}),a.createIndex("payment_status","payment_status",{unique:!1}),a.createIndex("name","name",{unique:!1}),a.createIndex("country","country",{unique:!1}),a.createIndex("state","state",{unique:!1}),a.createIndex("city","city",{unique:!1}),a.createIndex("address","address",{unique:!1}),a.createIndex("zipcode","zipcode",{unique:!1}),a.createIndex("start_date","start_date",{unique:!1}),a.createIndex("end_date","end_date",{unique:!1}),a.createIndex("created_at","created_at",{unique:!1}),a.createIndex("updated_at","updated_at",{unique:!1});var a=t.createObjectStore("question",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("question","question",{unique:!1}),a.createIndex("option1","option1",{unique:!1}),a.createIndex("option2","option2",{unique:!1}),a.createIndex("option3","option3",{unique:!1}),a.createIndex("option4","option4",{unique:!1}),a.createIndex("correct_opt","correct_opt",{unique:!1}),a.createIndex("type","type",{unique:!1}),a.createIndex("module_id","module_id",{unique:!1});var a=t.createObjectStore("analytics",{keyPath:"id"});a.createIndex("id","id",{unique:!0}),a.createIndex("userid","userid",{unique:!1}),a.createIndex("modelId","modelId",{unique:!1}),a.createIndex("type","type",{unique:!1}),a.createIndex("language","language",{unique:!1}),a.createIndex("open","open",{unique:!1}),a.createIndex("clicks","clicks",{unique:!1}),a.createIndex("correct","correct",{unique:!1}),a.createIndex("wrong","wrong",{unique:!1})})});licExamGuru.run(function(e){e.isExam=!1,e.language=$.cookie("language")?$.cookie("language"):"h"}),licExamGuru.factory("licExamGuruApi",function(e){return{serverPost:function(t,a){return e({url:apiurl+t,method:"POST",data:a})},serverGet:function(t,a){return e({url:apiurl+t,method:"POST",data:a})},password_encode:function(){}}}),licExamGuru.controller("IndexController",function(e,t,a,n,i,r,o){e.init=function(){o.openStore("users",function(e){e.getAll().then(function(e){0==e?window.location.hash="#/signup":$.cookie("userid")?"true"!=$.cookie("isPaid")?window.location.hash="#/licence":window.location=getUrl(url)+"home.html":window.location.hash="#/signin"})})},e.init()}),licExamGuru.controller("SigninController",function(e,t,a,n,i,r,o,u){$.backstretch("img/login-bg.jpg",{speed:500}),e.email="",e.paddword="",e.isSuccess=!1,e.loginFailMsg="",e.isLoginSction=!0,e.isLicenceSection=!1,e.data=[],e.showLicence=function(){var t=e.dateFormat();("paid"!=$.cookie("userStatus")||$.cookie("userExpDate")>t)&&(e.isLoginSction=!1,e.isLicenceSection=!0)},e.dateFormat=function(){var e=new Date;return u(e,"yyyyMMdd")},e.login=function(){e.loginFailMsg="Checking offline processing ...",o.openStore("users",function(t){var a=t.QueryBulder().$index("email").$eq(e.email);t.eachWhere(a).then(function(a){a&&($.each(a,function(a,n){if(n.email==e.email&&n.password.split("~-+-~")[1]==pass_decode(e.password).split("~-+-~")[1]){e.loginFailMsg="Login success processing ...",e.isSuccess=!0,$.cookie("userid",n.id),$.cookie("userName",n.name);var i=e.dateFormat(),r=n.exp_date?n.exp_date.replace(" ",""):i;"paid"==n.status&&r.replace(" ","")>i?$.cookie("isPaid","true"):(n.status="free",t.upsert(n),$.cookie("isPaid","false")),window.location.hash="#/"}}),e.loginFailMsg="Checking online processing ..."),navigator.onLine?r.serverPost("check_user",data={email:e.email,password:e.password}).success(function(t){if(t.result){e.loginFailMsg="Login success processing ...",e.isSuccess=!0;var a=[{id:t.result.id.toString(),name:t.result.name,email:t.result.email,mobile:t.result.mobile,state:t.result.state,city:t.result.city,division:t.result.division,password:pass_decode(t.result.password),passwordtext:pass_decode(t.result.passwordtext)}];e.user_data=a,e.saveInDb(),$.cookie("userid",t.result.id),$.cookie("userName",t.result.name)}else e.isSuccess=!1,e.loginFailMsg="Email or password not match"}):(e.isSuccess=!1,e.loginFailMsg="Email or password not match")})})},e.saveInDb=function(){o.openStore("users",function(t){t.insert(e.user_data),window.location.hash="#/"})}}),licExamGuru.controller("SignupController",function(e,t,a,n,i,r,o){$.backstretch("img/login-bg.jpg",{speed:500}),e.name="",e.email="",e.mobile="",e.state="",e.city="",e.division="",e.paddword="",e.passwordtext="",e.errormsg="",e.user_data=[],e.sugnup=function(){o.openStore("users",function(t){t.count().then(function(t){var a=[{id:(parseInt(t)+1).toString(),name:e.name,email:e.email,mobile:e.mobile,state:e.state,city:e.city,division:e.division,password:e.password,passwordtext:e.passwordtext}];r.serverPost("create_user",a[0]).success(function(t){t.success?(e.isSuccess=!1,e.loginFailMsg=t.success,a[0].password=pass_decode(e.password),a[0].passwordtext=pass_decode(e.passwordtext),e.user_data=a,e.saveInDb()):(e.isSuccess=!1,e.loginFailMsg=t.errormsg)})})})},e.saveInDb=function(){o.openStore("users",function(t){t.insert(e.user_data),window.location.hash="#/"})}}),licExamGuru.controller("LicenceController",function(e,t,a,n,i,r,o,u){e.licenceCode="",e.locenceText=$.cookie("locenceText")?$.cookie("locenceText"):create_licence_key(),$.backstretch("img/login-bg.jpg",{speed:500}),e.isSuccess=!1,e.loginFailMsg="",e.dateFormat=function(){var e=new Date;return u(e,"yyyy MM dd")},e.dateFormat30=function(){var e=new Date;return e.setTime(e.getTime()+2592e6),u(e,"yyyy MM dd")},e.licence=function(){o.openStore("users",function(t){var a=t.QueryBulder().$index("id").$eq($.cookie("userid").toString());t.eachWhere(a).then(function(a){a&&$.each(a,function(a,n){n.id==$.cookie("userid")&&e.licenceCode==get_licence_value(e.locenceText)?(n.status="paid",n.exp_date=e.dateFormat30(),t.upsert(n),$.cookie("isPaid","true"),$.removeCookie("locenceText"),window.location.hash="#/"):(e.isSuccess=!1,e.loginFailMsg="Invalid Licence Code")})})})}}),licExamGuru.controller("LogoutController",function(){$.removeCookie("userid"),$.removeCookie("url"),$.removeCookie("isPaid"),$.removeCookie("userName"),window.location=url}),licExamGuru.controller("DashboardController",function(e,t,a,n,i,r,o,u){$.cookie("userid")||(window.location=url),validate(),angular.element("#top_menu").scope().paperOption(!1),e.data=[],e.analytics={exam:{open:0,clicks:0,correct:0,wrong:0,per:0,msg:""},watch:{open:0,clicks:0,correct:0,wrong:0,per:0,msg:""}},e.updateLocalStorage=function(){r.serverGet("getData",{}).success(function(t){e.data=t.result;var a=e.data.meratial.table;o.openStore(a.toString(),function(t){for(j=0;j<e.data.meratial.recdatacount;j++)t.insert(e.data.meratial.recdata[j])});var a=e.data.model_paper.table;o.openStore(a.toString(),function(t){for(j=0;j<e.data.model_paper.recdatacount;j++)t.insert(e.data.model_paper.recdata[j])});var a=e.data.question.table;o.openStore(a.toString(),function(t){for(j=0;j<e.data.question.recdatacount;j++)t.insert(e.data.question.recdata[j])})})},o.openStore("question",function(t){t.count().then(function(t){0>=t&&e.updateLocalStorage()})}),e.loadData=function(){o.openStore("analytics",function(a){var n=a.QueryBulder().$index("language").$eq(t.language);a.eachWhere(n).then(function(t){$.each(t,function(t,a){if($.cookie("userid")==a.userid){e.analytics[a.type].open=parseInt(e.analytics[a.type].open)+parseInt(a.open),e.analytics[a.type].clicks=parseInt(e.analytics[a.type].clicks)+parseInt(a.clicks),e.analytics[a.type].correct=parseInt(e.analytics[a.type].correct)+parseInt(a.correct),e.analytics[a.type].wrong=parseInt(e.analytics[a.type].wrong)+parseInt(a.wrong);var n=parseInt(parseInt(e.analytics[a.type].correct)/parseInt(e.analytics[a.type].clicks)*100);e.analytics[a.type].per=n,e.analytics[a.type].msg=40>=n?" This is too low for attempt exam.":60>=n?" This is avarage you can attempt exam.":" this is good you are ready to attempt exam"}})})})},e.dateFormat=function(){var e=new Date;return u(e,"yyyyMMdd")},e.check_exp_date=function(){o.openStore("users",function(t){var a=t.QueryBulder().$index("id").$eq($.cookie("userid").toString());t.eachWhere(a).then(function(a){a&&$.each(a,function(a,n){var i=e.dateFormat(),r=n.exp_date?n.exp_date.replace(" ",""):i;n.id==$.cookie("userid")&&r.replace(" ","")<i&&(n.status="free",t.upsert(n),$.cookie("isPaid","false"),$.removeCookie("locenceText"),window.location.hash="#/")})})})},e.check_exp_date(),e.loadData()}),licExamGuru.controller("NavbarTopController",function(e,t,a,n,i,r,o){e.logoutUrl=getUrl(url),e.model=o.model,e.module_id=o.module_id,e.showpaterOption=!1,e.isExam="",e.paperOption=function(a){e.showpaterOption=a,e.model=o.model,e.module_id=o.module_id,e.isExam=o.exam,e.isExam&&(e.showpaterOption=!1,t.isExam=!0)},e.withoutAns=function(){angular.element("#modelPaper").scope().showAns=!1,angular.element("#modelPaper").scope().showOption=!0,$("body").find("input").prop("disabled",!1)},e.withAns=function(){angular.element("#modelPaper").scope().showAns=!0,angular.element("#modelPaper").scope().showOption=!0,setTimeout(function(){$("body").find("input").prop("disabled",!0)},10)},e.onlyAns=function(){angular.element("#modelPaper").scope().showAns=!0,angular.element("#modelPaper").scope().showOption=!1},e.languageChange=function(e){t.language=e,$.cookie("language",e),window.location=window.location=getUrl(url)+"home.html"}}),licExamGuru.controller("NavbarLeftController",function(e,t,a,n,r,o,u,c){e.hindiModel,e.englishModel,e.hindiPdf,e.englishPdf,e.userName=$.cookie("userName"),e.loadMenu=function(){c.openStore("model_paper",function(a){var n=a.QueryBulder().$index("type").$eq(t.language);a.eachWhere(n).then(function(t){for(i=0;i<t.length;i++)t[i].id=parseInt(t[i].id);e.hindiModel=t})}),c.openStore("meratial",function(a){var n=a.QueryBulder().$index("type").$eq(t.language);a.eachWhere(n).then(function(t){for(i=0;i<t.length;i++)t[i].id=parseInt(t[i].id);e.hindiPdf=t})})},e.loadMenu()}),licExamGuru.controller("ExamHeaderController",function(e,t,a,n){var r=new Date;if(e.total=50,e.attempt=0,e.remaning=50,$.cookie("examtime")&&n.get("data"))for(e.examdata=n.get("data"),i=0;i<e.examdata.length;i++)0!=e.examdata[i][1]&&(e.attempt++,e.remaning--);$.cookie("examtime")||(e.examtime=r.getTime(),$.cookie("examtime",e.examtime),$.cookie("examurl",window.location.href)),e.minuts=59-parseInt(parseInt(r.getTime()-parseInt($.cookie("examtime")))/6e4),e.second=60-parseInt(parseInt(r.getTime()-parseInt($.cookie("examtime")))/1e3)%60,e.timer=function(){setTimeout(function(){var t=new Date;return e.minuts=59-parseInt(parseInt(t.getTime()-parseInt($.cookie("examtime")))/6e4),e.second=60-parseInt(parseInt(t.getTime()-parseInt($.cookie("examtime")))/1e3)%60,parseInt(e.minuts)<=0&&parseInt(e.second)<=1?(e.minuts=0,e.second=0,$("body").find("input").prop("disabled",!0),angular.element("#modelPaper").scope().submitExam("Your time is over, bellow is the details of your exam, click on submit"),$.removeCookie("examtime"),$.removeCookie("examurl"),!1):(e.minuts=e.minuts<10?"0"+e.minuts:e.minuts,e.second=e.second<10?"0"+e.second:e.second,$("#timertime").html("<span class='examlabel'>Time (MM:SS) : "+e.minuts+" : "+e.second+"</span>"),void e.timer())},1e3)},e.submitExam=function(){angular.element("#modelPaper").scope().submitExam("You have yet time for submit exam, if you are sure to submit then click on submit")},e.attemptExam=function(t){e.attempt=t,e.remaning=e.total-t;{var a=[{value:e.attempt,color:"#68dff0"},{value:e.remaning,color:"#fdfdfd"}];new Chart(document.getElementById("serverstatus01").getContext("2d")).Doughnut(a)}},e.timer(),e.attemptExam(e.attempt)}),licExamGuru.controller("ModelpaperController",function(e,t,a,n,r,o,u,c,d){e.model="hindi"==u.model?"h":"e",e.module_id=u.module_id,e.count=1,e.loading=!0,e.showAns=!1,e.showOption=!0,e.examdata=[],e.attempt=0,e.remaning=50,e.remaningtime=0,e.submitTitle="",e.analyticsData=[],c.openStore("question",function(t){var a=t.QueryBulder().$index("module_id").$eq(e.module_id);t.eachWhere(a).then(function(t){for($.cookie("examtime")&&n.get("data")&&(e.examdata=n.get("data")),i=0;i<t.length;i++)$.cookie("examtime")||(e.examdata[i]=["2","0","0"]),t[i].checked=e.examdata[i][0],t[i].clicked=e.examdata[i][1];e.modelPaper=t,e.loading=!1,e.isExam=u.exam,n.put("data",e.examdata),angular.element("#top_menu").scope().paperOption(!0)})}),e.analytics=function(){c.openStore("analytics",function(a){a.getAll().then(function(n){var i={id:(parseInt(n.length)+1).toString(),userid:$.cookie("userid"),modelId:e.module_id,type:u.exam?"exam":"watch",language:t.language,open:"1",clicks:"0",correct:"0",wrong:"0"},r=!1;$.each(n,function(t,n){n.userid==i.userid&&n.modelId==i.modelId&&n.type==i.type&&n.language==i.language&&(n.open=(parseInt(n.open)+1).toString(),e.analyticsData=n,a.upsert(n),r=!0)}),r||(a.insert(i),e.analyticsData=i)})})},e.analytics(),e.onCheck=function(t,a,i,r){var o=n.get("data");if(u.exam?1==o[t][2]&&a.trim()!=i.trim()?(e.analyticsData.correct=parseInt(e.analyticsData.correct)-1,e.analyticsData.wrong=parseInt(e.analyticsData.wrong)+1):2==o[t][2]&&a.trim()==i.trim()?(e.analyticsData.correct=parseInt(e.analyticsData.correct)+1,e.analyticsData.wrong=parseInt(e.analyticsData.wrong)-1):0==o[t][2]&&(a.trim()==i.trim()?e.analyticsData.correct=parseInt(e.analyticsData.correct)+1:e.analyticsData.wrong=parseInt(e.analyticsData.wrong)+1,e.analyticsData.clicks=parseInt(e.analyticsData.clicks)+1):(e.analyticsData.clicks=parseInt(e.analyticsData.clicks)+1,e.analyticsData.correct=parseInt(e.analyticsData.correct)+(a.trim()==i.trim()?1:0),e.analyticsData.wrong=parseInt(e.analyticsData.wrong)+(a.trim()==i.trim()?0:1)),c.openStore("analytics",function(t){t.upsert(e.analyticsData)}),o[t][0]=e.modelPaper[t].checked=a.trim()==i.trim()?1:0,o[t][1]=e.modelPaper[t].clicked=r,o[t][2]=a.trim()==i.trim()?1:2,e.examdata=o,e.isExam=u.exam,e.isExam){n.put("data",e.examdata);var d=0;for(r=0;r<e.examdata.length;r++)0!=e.examdata[r][1]&&d++;angular.element("#top_menu").scope().attemptExam(d)}},e.submitExam=function(t){e.submitTitle=t,n.put("data",e.examdata);var a=0;for(i=0;i<e.examdata.length;i++)0!=e.examdata[i][1]&&a++;e.attempt=a,e.remaning=50-a;var r=new Date,o=59-parseInt(parseInt(r.getTime()-parseInt($.cookie("examtime")))/6e4),u=60-parseInt(parseInt(r.getTime()-parseInt($.cookie("examtime")))/1e3)%60;e.remaningtime=o+" : "+u,$("#myModal").modal("show")},e.finalSubmit=function(){c.openStore("exam_table",function(a){a.count().then(function(n){var r=new Date,o=d(r,"dd MMM yyyy"),n=0;for(i=0;i<e.examdata.length;i++)1==e.examdata[i][2]&&n++;var u={id:(parseInt(n)+1).toString(),member:$.cookie("userid"),model_id:e.module_id,exam_type:t.language,exam_date:o,questions:"50",attempt:e.attempt,unattenpt:e.remaning,correct:n,wrong:e.attempt-n,result:e.examdata,status:"active"};a.insert(u),$.removeCookie("examtime"),$.removeCookie("examurl"),window.location=window.location=getUrl(url)+"home.html"})})}}),licExamGuru.controller("MetarialController",function(e,t,a,n,i,r,o){e.metarialname=o.name,e.metarialname=getUrl(url)+"/pdfsyllabus/"+e.metarialname+".pdf"}),licExamGuru.controller("AnalyticsController",function(e,t,a,n,i,r,o,u){e.type=o.type,e.model=o.model,e.report=[],u.openStore("analytics",function(a){var n=a.QueryBulder().$index("userid").$eq($.cookie("userid"));a.eachWhere(n).then(function(a){var n=0;$.each(a,function(a,i){t.language==i.language&&e.type==i.type&&(i.per=parseInt(parseInt(i.correct)/parseInt(i.clicks)*100),e.report[n++]=i)})})})}),licExamGuru.controller("ReportController",function(e,t,a,n,i,r,o,u){e.result=[],u.openStore("exam_table",function(a){var n=a.QueryBulder().$index("member").$eq($.cookie("userid"));a.eachWhere(n).then(function(a){var n=0;$.each(a,function(a,i){if(t.language==i.exam_type){var r=parseInt(parseInt(i.correct)/parseInt(i.questions)*100);e.result[n]=i,e.result[n++].per=r}})})})}),licExamGuru.controller("DetailsController",function(e,t,a,n,r,o,u,c){e.result=[],e.loading=!0,e.examid=u.examid,e.examdata=[],c.openStore("exam_table",function(t){var a=t.QueryBulder().$index("id").$eq(e.examid);t.eachWhere(a).then(function(t){e.examdata=t[0].result,e.loadModel(t[0].model_id,t[0].exam_type)})}),e.loadModel=function(t){c.openStore("question",function(a){var n=a.QueryBulder().$index("module_id").$eq(t);a.eachWhere(n).then(function(t){for(i=0;i<t.length;i++)t[i].checked=e.examdata[i][0],t[i].clicked=e.examdata[i][1],t[i].ansokay=1==e.examdata[i][2]?!0:!1;e.modelPaper=t,e.loading=!1})})}}),licExamGuru.controller("PasswordController",function(e,t,a,n,i,r,o,u){e.user_data=[],e.paddword="",e.passwordtext="",e.loginFailMsg="",u.openStore("users",function(t){var a=t.QueryBulder().$index("id").$eq($.cookie("userid"));t.eachWhere(a).then(function(t){e.user_data=t})}),e.updateProfile=function(){u.openStore("users",function(t){t.upsert(e.user_data[0]),window.location=window.location=getUrl(url)+"home.html"})},$(".fileImg").change(function(){if(this.files&&this.files[0]){var t=new FileReader;t.onload=function(t){e.user_data[0].profile_photo=t.target.result,$(this).parent().parent().find("img").attr("src",t.target.result)},t.readAsDataURL(this.files[0])}}),e.showModal=function(){$("#myModal").modal("show")},e.resetPass=function(){e.password?e.password==e.passwordtext?(e.user_data[0].password=pass_decode(e.password),e.user_data[0].passwordtext=pass_decode(e.passwordtext),u.openStore("users",function(t){t.upsert(e.user_data[0]),$("#myModal").modal("hide")})):e.loginFailMsg="Password does not math":e.loginFailMsg="Please enter password"}});